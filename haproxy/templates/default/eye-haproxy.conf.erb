# This file was generated by chef for <%= @node[:fqdn] %>

require File.join(File.dirname(__FILE__), "config.rb")

Eye.application 'haproxy' do
  <% if node['eye']['notify'] -%>
  notify <%= node['eye']['notify'] %>
  <% end -%>
  working_dir '/etc/haproxy'

  process('haproxy') do
    pid_file '/var/run/haproxy.pid'
    start_command '/usr/sbin/haproxy -D -f /etc/haproxy/haproxy.cfg -p /var/run/haproxy.pid'
    stop_command 'kill -USR1 {PID}'
    restart_command '/usr/sbin/haproxy -D -f /etc/haproxy/haproxy.cfg -p /var/run/haproxy.pid -sf {PID}'
  end
end
